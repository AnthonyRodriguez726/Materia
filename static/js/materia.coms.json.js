// Generated by CoffeeScript 1.6.3
(function() {
  Namespace('Materia.Coms').Json = (function() {
    var isError, send, setGateway, showErorr, _gatewayURL;
    _gatewayURL = null;
    setGateway = function(newGateway) {
      return _gatewayURL = newGateway;
    };
    send = function(method, args, callback, ignoreError) {
      var callbackInterrupt;
      if (_gatewayURL == null) {
        _gatewayURL = API_LINK;
      }
      if (callback == null) {
        callback = $.noop();
      }
      if (args == null) {
        args = [];
      }
      callbackInterrupt = function(data) {
        if ((ignoreError != null) && (data != null) && (data.msg != null) && (data.title != null) && (data.type != null)) {
          showErorr(data);
        }
        if (callback != null) {
          return callback(data);
        }
      };
      return $.post(_gatewayURL + method + "/", {
        data: JSON.stringify(args)
      }, callbackInterrupt, 'json');
    };
    showErorr = function(data) {
      if (data.title === 'Invalid Login') {
        return window.location = BASE_URL + "login";
      }
    };
    isError = function(jsonResult) {
      return (jsonResult != null) && typeof jsonResult.errorID !== 'undefined';
    };
    return {
      send: send,
      isError: isError,
      setGateway: setGateway
    };
  })();

}).call(this);
