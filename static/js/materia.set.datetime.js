// Generated by CoffeeScript 1.6.3
(function() {
  Namespace('Materia.Set').DateTime = (function() {
    var fixTime, parseObjectToDateString, parseTime;
    parseObjectToDateString = function(time) {
      var timeObj, year;
      timeObj = new Date(time * 1000);
      year = String(timeObj.getFullYear());
      return (timeObj.getMonth() + 1) + '/' + timeObj.getDate() + '/' + year.substr(2);
    };
    parseTime = function(time) {
      var amPm, hour, minute, timeObj;
      timeObj = new Date(time * 1000);
      amPm = 'am';
      hour = timeObj.getHours();
      minute = timeObj.getMinutes();
      if (minute < 10) {
        minute = '0' + minute;
      }
      if (hour > 11) {
        if (hour !== 12) {
          hour -= 12;
        }
        amPm = 'pm';
      } else {
        if (hour === 0) {
          hour = '12';
        }
      }
      return hour + ':' + minute + amPm;
    };
    fixTime = function(time, servTime) {
      var clientUTCDate, clientUTCTimestamp, fixedDateStr, newDate, now, offset, serverDateFromPage, serverUTCDate, serverUTCTimestamp, timeToFix;
      timeToFix = new Date(time).getTime();
      serverDateFromPage = servTime;
      now = new Date();
      clientUTCDate = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());
      serverUTCDate = new Date(serverDateFromPage);
      clientUTCTimestamp = clientUTCDate.getTime();
      serverUTCTimestamp = serverUTCDate.getTime();
      offset = serverUTCTimestamp - clientUTCTimestamp;
      newDate = new Date(timeToFix + offset);
      fixedDateStr = (newDate.getHours() % 12) + ':' + String('00' + newDate.getMinutes()).slice(-2);
      if (newDate.getHours() > 11) {
        fixedDateStr += 'pm';
      } else {
        fixedDateStr += 'am';
      }
      return fixedDateStr;
    };
    return {
      parseObjectToDateString: parseObjectToDateString,
      parseTime: parseTime,
      fixTime: fixTime
    };
  })();

}).call(this);
