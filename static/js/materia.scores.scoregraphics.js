// Generated by CoffeeScript 1.6.3
(function() {
  Namespace('Materia.Scores').Scoregraphics = (function() {
    var drawFinalScoreCircle, drawModifierCircle, drawScoreCircle;
    drawScoreCircle = function(canvasName, number, percent, greyMode) {
      var canvas, context, dotColor, end, h, halfH, lineWidth, radius, start, x, y;
      canvas = $('#' + canvasName);
      h = parseInt(canvas.css('height'), 10);
      halfH = h / 2;
      lineWidth = 5;
      radius = (h - lineWidth) / 2;
      canvas.attr('height', h).attr('width', h);
      if (canvas[0].getContext) {
        context = canvas[0].getContext('2d');
        dotColor = greyMode === true ? '#C3C5C8' : (parseInt(percent, 10) !== 1 ? "#e2dcdf" : "rgba(106, 148, 81, .2)");
        context.strokeStyle = greyMode === true ? "#B3B5B8" : "#db8081";
        context.beginPath();
        context.arc(halfH, halfH, radius, 0, Math.PI * 2, false);
        context.lineWidth = lineWidth - 0.5;
        context.fillStyle = dotColor;
        context.fill();
        context.stroke();
        start = Math.PI * 2 * 0.75;
        end = start + Math.PI * 2 * percent;
        context.strokeStyle = greyMode === true ? "#B3B5B8" : "#7dba72";
        context.beginPath();
        context.arc(halfH, halfH, radius, start, end, false);
        context.lineWidth = lineWidth;
        context.stroke();
        x = radius;
        y = radius;
        context.font = "bold 28px Lato";
        context.textAlign = "center";
        context.textBaseline = "middle";
        context.fillStyle = "#555555";
        return context.fillText(number, halfH, halfH);
      }
    };
    drawModifierCircle = function(canvasName, number, percent, greyMode) {
      var canvas, context, dotColor, h, halfH, lineWidth, percentColor, radius;
      canvas = $('#' + canvasName);
      h = parseInt(canvas.css('height'));
      halfH = h / 2;
      lineWidth = 5;
      radius = (h - lineWidth) / 2;
      canvas.attr('height', h);
      canvas.attr('width', h);
      if (canvas[0].getContext) {
        context = canvas[0].getContext('2d');
        percentColor = percent < 0 ? '#db8081' : '#7dba72';
        dotColor = greyMode === true ? '#C3C5C8' : percentColor;
        context.lineWidth = lineWidth - 0.5;
        context.strokeStyle = greyMode === true ? '#B3B5B8' : '#555555';
        context.beginPath();
        context.arc(halfH, halfH, radius, 0, Math.PI * 2, false);
        context.fillStyle = dotColor;
        context.fill();
        context.stroke();
        context.font = "bold 28px Lato";
        context.textAlign = "center";
        context.textBaseline = "middle";
        context.fillStyle = "#555555";
        return context.fillText(number, halfH, halfH);
      }
    };
    drawFinalScoreCircle = function(canvasName, number, percent) {
      var canvas, context, end, fillColor, greenSliceColor, h, halfH, radius, start;
      canvas = $('#' + canvasName);
      h = parseInt(canvas.css('height'));
      halfH = h / 2;
      radius = (h - 2) / 2;
      canvas.attr('height', h);
      canvas.attr('width', h);
      if (canvas[0].getContext) {
        context = canvas[0].getContext('2d');
        fillColor = '#db8081';
        context.strokeStyle = '555555';
        context.lineWidth = 2;
        context.beginPath();
        context.arc(halfH, halfH, radius, 0, Math.PI * 2, false);
        context.fillStyle = fillColor;
        context.fill();
        context.stroke();
        start = Math.PI * 2 * 0.75;
        end = start + Math.PI * 2 * percent;
        greenSliceColor = '#7dba72';
        context.fillStyle = greenSliceColor;
        context.beginPath();
        context.arc(halfH, halfH, radius - 1, start, end, false);
        context.lineTo(halfH, halfH);
        context.closePath();
        return context.fill();
      }
    };
    return {
      drawScoreCircle: drawScoreCircle,
      drawModifierCircle: drawModifierCircle,
      drawFinalScoreCircle: drawFinalScoreCircle
    };
  })();

}).call(this);
