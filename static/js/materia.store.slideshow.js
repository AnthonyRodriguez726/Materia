// Generated by CoffeeScript 1.6.3
(function() {
  Namespace('Materia.Store').SlideShow = (function() {
    var formatCycler, goToSlide, spotlightChange, spotlightSelected;
    formatCycler = function(callback) {
      var cyclerWidth, intervalID, selected;
      selected = ' spotlight_selected';
      $('.cycler').children('input').each(function() {
        $(this).hide();
        $(this).after('<span class="span_next' + selected + '"></span>');
        return selected = '';
      });
      cyclerWidth = $('.span_next').outerWidth(true) * $('.span_next').length;
      $('.cycler').width(cyclerWidth);
      intervalID = setInterval(spotlightChange, 12000);
      return $('.span_next').click(function() {
        var num;
        if ($(this).hasClass('spotlight_selected')) {
          return false;
        }
        clearInterval(intervalID);
        spotlightSelected($(this));
        num = $(this).prev().attr('id').split('_');
        num = num.pop();
        return goToSlide(num);
      });
    };
    goToSlide = function(slideNo) {
      var changeNum, changeTo, changeToId, id, num, showing;
      showing = $('.main_container').children(':visible');
      id = showing.attr('id');
      changeTo = $("#spolight_" + slideNo);
      changeToId = changeTo.attr('id');
      num = id.split('_').pop();
      changeNum = changeToId.split('_').pop();
      if (num > changeNum) {
        showing.hide('slide', {
          direction: 'right',
          speed: 'slow'
        });
        return changeTo.show('slide', {
          direction: 'left',
          speed: 'slow'
        });
      } else {
        showing.hide('slide', {
          direction: 'left',
          speed: 'slow'
        });
        return changeTo.show('slide', {
          direction: 'right',
          speed: 'slow'
        });
      }
    };
    spotlightChange = function() {
      var nextObj, num, obj;
      if ($('.main_container').children(':visible').next().is(':hidden')) {
        obj = $('.main_container').children(':visible');
        nextObj = $('.main_container').children(':visible').next();
        obj.hide('slide', {
          direction: 'left',
          speed: 'slow'
        });
        nextObj.show('slide', {
          direction: 'right',
          speed: 'slow'
        });
        num = nextObj.attr('id').split('_');
        num = num.pop();
        return spotlightSelected($("#slide_" + num).next());
      } else {
        $('.main_container').children(':visible').hide('slide', {
          direction: 'right',
          speed: 'slow'
        });
        obj = $('.main_container').children(':first-child');
        $('.main_container').children(':first-child').show('slide', {
          direction: 'left',
          speed: 'slow'
        });
        num = obj.attr('id').split('_');
        num = num.pop();
        return spotlightSelected($("#slide_" + num).next());
      }
    };
    spotlightSelected = function(button) {
      $('.cycler').children('span').each(function() {
        return $(this).removeClass('spotlight_selected');
      });
      return button.addClass('spotlight_selected').prev().attr('checked', 'checked');
    };
    return {
      formatCycler: formatCycler
    };
  })();

}).call(this);
