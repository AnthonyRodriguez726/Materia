(function(){Namespace("Materia.Widget").Detail=function(){var SCREENSHOT_AMOUNT,hideToolTip,init,populateDefaults,prepare,showToolTip;return SCREENSHOT_AMOUNT=3,init=function(){},prepare=function(){var nameArr,widgetID;return nameArr=window.location.pathname.replace("/widgets/","").split("/"),widgetID=nameArr.pop().split("-").shift(),Materia.Coms.Json.send("widgets_get",[[widgetID]],function(data){return populateDefaults(data[0]),nameArr.length>1?($(".widget_catalog_button").attr("href","/"),$(".goBackText").text("Go back to the front page")):void 0})},populateDefaults=function(widget){var $meta_dataDl,clean_name,clonedLi,data,feature,templateLi,x,_i,_j,_k,_len,_len1,_ref,_ref1;for(clean_name=widget.clean_name,$(".widget_icon").attr("src",Materia.Image.iconUrl(widget.dir,394)),$(".detail").children("h1").html(widget.name),null!=widget.meta_data.subheader?$(".detail").children("h2").html(widget.meta_data.subheader):$(".detail").children("h2").remove(),templateLi=$(".pics").children("li"),"undefined"===widget.meta_data.about&&(widget.meta_data.about="No description available."),$(".detail").after(widget.meta_data.about),x=_i=1;SCREENSHOT_AMOUNT>=1?SCREENSHOT_AMOUNT>=_i:_i>=SCREENSHOT_AMOUNT;x=SCREENSHOT_AMOUNT>=1?++_i:--_i)clonedLi=$(templateLi).clone(),$(clonedLi).children("a").attr("href",Materia.Image.screenshotUrl(widget.dir,x)).children("img").attr("src",Materia.Image.screenshotThumbUrl(widget.dir,x)),$(templateLi).before(clonedLi);if($("a.grouped_elements").fancybox(),$(templateLi).remove(),$meta_dataDl=$("#metaData"),null!=widget.meta_data.features&&widget.meta_data.features.length>0)for($meta_dataDl.append("<dt>Features:</dt>"),_ref=widget.meta_data.features,_j=0,_len=_ref.length;_len>_j;_j++)feature=_ref[_j],$meta_dataDl.append($("<dd>").append($("<a>").addClass("feature").html(feature)));if(null!=widget.meta_data.supported_data&&widget.meta_data.supported_data.length>0)for($meta_dataDl.append("<dt>Supported Data:</dt>"),_ref1=widget.meta_data.supported_data,_k=0,_len1=_ref1.length;_len1>_k;_k++)data=_ref1[_k],$meta_dataDl.append($("<dd>").append($("<a>").addClass("supported_data").html(data)));return $(".widget_detail .feature, .widget_detail .supported_data").hover(function(){var description,pos,type;return pos=null,type=null,$(this).hasClass("feature")?(pos=$(this).index(".widget_detail .feature"),type=".feature"):$(this).hasClass("supported_data")&&(pos=$(this).index(".widget_detail .supported_data"),type=".supported_data"),description=$(this).html(),Materia.Widget.Detail.showToolTip(pos,description,type)},function(){return Materia.Widget.Detail.hideToolTip()}),$("#demoLink").attr("href",document.location.pathname+"/demo"),$("#createLink").attr("href",document.location.pathname+"/create"),$(".page").show()},showToolTip=function(pos,description,type){var featureItem,height,left,text,top,tt;switch(text="",description){case"Customizable":text="As the widget creator, you supply the widget with data to make it relevant to your course.";break;case"Scorable":text="This widget collects scores, and is well suited to gauge performance.";break;case"Media":text="This widget uses image media as part of its supported data.";break;case"Question/Answer":text="Users provide a typed response or associate a predefined answer wih each question.";break;case"Multiple Choice":text="Users select a response from a collection of possible answers to questions provided by the widget.";break;default:text="This feature has no additional information associated with it."}return tt=$("<div>").addClass("tooltip").html(text),$(".widget_detail").append(tt),featureItem=$(type).eq(pos),left=featureItem.position().left,height=tt.height(),top=featureItem.position().top-height-40,tt.css({top:top,left:left}),tt.fadeIn("fast")},hideToolTip=function(){var tt;return tt=$(".widget_detail").find(".tooltip"),$(tt).remove()},{init:init,prepare:prepare,showToolTip:showToolTip,hideToolTip:hideToolTip}}()}).call(this);