(function(){Namespace("Materia.Profile.Activity").Load=function(){var getLogs,init,_offset,_showPlayActivity,_user_id;return _offset=0,_user_id=null,init=function(){},getLogs=function(callback){return $("#activity_logs_loading").show(),Materia.Coms.Json.send("user_get",null,function(user){return null!=_user_id&&(_user_id=user.id),Materia.Coms.Json.send("play_activity_get",[_offset],function(data){return _showPlayActivity(data),null!=callback?callback():void 0})})},_showPlayActivity=function(data){var $activityLink,play,_i,_len,_ref,_results;for($(".activity > ul").show(),$("#activity_logs_loading").hide(),0===data.activity.length?$(".no_logs").show():$("#show_more_activity").show(),data.more!==!0&&$("#show_more_activity").hide(),_ref=data.activity,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)play=_ref[_i],$activityLink=$("#activity_logs_template").clone(),$activityLink.removeAttr("id").removeClass("activity_logs_template").addClass("100"===play.percent?"perfect_score":"").addClass("1"===play.is_complete?"complete":"incomplete").find(".title").html(play.inst_name).end().find(".date").html(Materia.Set.DateTime.parseObjectToDateString(play.created_at)+" at "+Materia.Set.DateTime.fixTime(1e3*parseInt(play.created_at,10),DATE)).end().find(".score").html("1"===play.is_complete?Math.round(parseFloat(play.percent)):"--").end().find(".widget").html(play.widget_name).end().find(".status").html("1"===play.is_complete?"":"No Score Recorded"),"0"===play.is_complete?$activityLink.find(".score-link").removeAttr("href"):$activityLink.find(".score-link").attr("href",""+BASE_URL+"scores/"+play.inst_id+"#play-"+play.play_id),$activityLink.appendTo($(".activity > ul")),_results.push(_offset++);return _results},{init:init,getLogs:getLogs}}()}).call(this);